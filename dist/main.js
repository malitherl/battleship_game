(()=>{"use strict";function t(t){if("Hit"===t.value[1]){let e=document.createElement("img");e.style.height="50px",e.style.width="50px",e.src="https://www.pngpix.com/wp-content/uploads/2016/11/PNGPIX-COM-Explosion-PNG-Image.png",t.appendChild(e)}else t.textContent="X",t.style.color="red",t.style.fontSize="45px",t.style.fontFamily="arial",t.style.textAlign="center"}function e(t){let e=function(t){let e=[];for(let n=0;n<t;n++)e.push("Not hit");return e}(t);return{length:t,type:n(t),status:e,hit(t){if(t>=this.length)throw Error;return this.status[t]="Hit",this.status[t]},isSunk(){let t=!0;return this.status.forEach((e=>{"Not hit"==e.valueOf()&&(t=!1)})),t},getLength(){return this.length}}}function n(t){switch(t){case 2:return"Destroyer";case 3:return"Cruiser";case 4:return"Battleship";case 5:return"Carrier"}}function a(){let t=new Array(10);for(let e=0;e<t.length;e++)t[e]=new Array(10),t[e].fill([]);let e=new Map,n=[];return{givenBoard:t,missed:n,place(n,a){let l=n.length,o=0,r=[];for(;l>0;){let t=[n.type,n.status[l-1],n.length-l];this.givenBoard[a][o]=t;let e=[a,o];r.push(e),l--,o++}return e.set(n,r),t=this.givenBoard,console.log(e),this.givenBoard},receiveAttack(t,a){let l=[t,a];return 0===this.givenBoard[t][a]?(n.push(l),n):(e.forEach((function(t,e){t.forEach((n=>{if(n.toString()===l.toString()){e.hit(t.indexOf(n));let a=[e.type,e.status[t.indexOf(n)]];l=a}}))})),this.givenBoard[t][a]=l,this.givenBoard)},allShipsSunk(){let t=!0;return e.forEach((function(e,n){0==n.isSunk()&&(t=!1)})),t}}}function l(t,n){let a,l=[],o=[];for(let t=2;t<6;t++)l.push(e(t));return a=0==n,{enemy:t,armada:l,attack:o,makeAttack(t,e){return this.enemy.receiveAttack(t,e),o.push([t,e]),e}}}!function(){let e=a(),n=a(),o=l(n,1),r=l(e,0),s=0;o.armada.forEach((t=>{e.place(t,s),n.place(t,s),s++})),function(t,e){let n=document.getElementById("content");n.style.display="grid",n.style.justifyContent="center";let a=document.createElement("DIV");a.setAttribute("id","player"),a.style.width="520px";let l=document.createElement("DIV");function o(t,e){for(let n=0;n<10;n++)for(let a=0;a<10;a++){let l=document.createElement("DIV");l.setAttribute("class","cell"),l.style.width="50px",l.style.height="50px",r(e[n][a],l),l.style.border="solid 1px grey",l.value=e[n][a],l.dataset.x=n,l.dataset.y=a,t.appendChild(l)}}function r(t,e){if("Hit"===t[1]){e.style.backgroundColor="black";let t=document.createElement("img");t.style.height="50px",t.style.width="50px",t.src="https://www.pngpix.com/wp-content/uploads/2016/11/PNGPIX-COM-Explosion-PNG-Image.png",e.appendChild(t)}else void 0!==t[0]?e.style.backgroundColor="black":e.style.backgroundColor="#003366"}l.setAttribute("id","computer"),l.style.width="520px",a.style.display="grid",a.style.gridTemplateColumns="auto auto auto auto auto auto auto auto auto auto ",a.style.marginTop="10px",l.style.display="grid",l.style.gridTemplateColumns="auto auto auto auto auto auto auto auto auto auto ",o(a,t),o(l,e),n.appendChild(l),n.appendChild(a)}(e.givenBoard,n.givenBoard),function e(n){if(console.log(n),0==n)Array.from(document.getElementsByClassName("cell")).forEach((a=>{a.addEventListener("click",(function(){console.log(a),0==function(e,n,a,l){return e.makeAttack(n,a),l.value=e.enemy.givenBoard[n][a],t(l),console.log(e.enemy.allShipsSunk()),e.enemy.allShipsSunk()}(o,a.dataset.x,a.dataset.y,a)?(Array.from(document.getElementsByClassName("cell")).forEach((t=>{t.outerHTML=t.outerHTML})),e(n)):alert("Congratulations! You won the game!")}))})),n++;else{let a=Math.floor(10*Math.random()+1),l=Math.floor(10*Math.random()+1);document.getElementById("player"),console.log(`${a} ${l}`),Array.from(document.getElementsByClassName("cell")).forEach((e=>{e.dataset.x==a&&e.dataset.y==l&&"player"==e.parentElement.id&&t(e)})),r.makeAttack(a,l),e(--n)}}(0)}()})();