(()=>{"use strict";function t(t){let a=function(t){let e=[];for(let a=0;a<t;a++)e.push("Not hit");return e}(t);return{length:t,type:e(t),status:a,hit(t){if(t>=this.length)throw Error;return this.status[t]="Hit",this.status[t]},isSunk(){let t=!0;return this.status.forEach((e=>{"Not hit"==e.valueOf()&&(t=!1)})),t},getLength(){return this.length}}}function e(t){switch(t){case 2:return"Destroyer";case 3:return"Cruiser";case 4:return"Battleship";case 5:return"Carrier"}}function a(){let t=new Array(10);for(let e=0;e<t.length;e++)t[e]=new Array(10),t[e].fill([]);let e=new Map,a=[];return{givenBoard:t,missed:a,place(a,o){let n=a.length,l=0,r=[];for(;n>0;){let t=[a.type,a.status[n-1],a.length-n];this.givenBoard[o][l]=t;let e=[o,l];r.push(e),n--,l++}return e.set(a,r),t=this.givenBoard,console.log(e),this.givenBoard},receiveAttack(t,o){let n=[t,o];return 0===this.givenBoard[t][o]?(a.push(n),a):(e.forEach((function(t,e){t.forEach((a=>{if(a.toString()===n.toString()){e.hit(t.indexOf(a));let o=[e.type,e.status[t.indexOf(a)]];n=o}}))})),this.givenBoard[t][o]=n,this.givenBoard)},allShipsSunk(){let t=!0;return e.forEach((function(e,a){0==a.isSunk()&&(t=!1)})),t}}}function o(e,a){let o,n=[],l=[];for(let e=2;e<6;e++)n.push(t(e));return o=0==a,{enemy:e,armada:n,attack:l,makeAttack(t,a){let n,r;return 1==o?(n=Math.floor(10*Math.random()+1),r=Math.floor(10*Math.random()+1),0!==e.givenBoard[n][r]?this.makeAttack(0,0):this.attack.forEach((t=>{t===[n,r]&&this.makeAttack(0,0)}))):(console.log(this.enemy),this.enemy.receiveAttack(t,a)),l.push([n,r]),r}}}!function(){let t=a(),e=a(),n=o(e,1),l=(o(t,0),0);n.armada.forEach((a=>{t.place(a,l),e.place(a,l),l++})),function(t,e){let a=document.getElementById("content");a.style.width="520px";let o=document.createElement("DIV"),n=document.createElement("DIV");o.style.display="none",o.style.gridTemplateColumns="auto auto auto auto auto auto auto auto auto auto ",n.style.marginTop="10px",n.style.display="grid",n.style.gridTemplateColumns="auto auto auto auto auto auto auto auto auto auto ",t.forEach((t=>{t.forEach((t=>{let e=document.createElement("DIV");e.setAttribute("class","cell"),e.style.width="50px",e.style.height="50px",l(t,e),e.style.border="solid 1px grey",o.appendChild(e)}))}));for(let t=0;t<10;t++)for(let a=0;a<10;a++){let o=document.createElement("DIV");o.setAttribute("class","cell"),o.style.width="50px",o.style.height="50px",l(e[t][a],o),o.style.border="solid 1px grey",o.value=e[t][a],o.dataset.x=t,o.dataset.y=a,n.appendChild(o)}function l(t,e){if("Hit"===t[1]){e.style.backgroundColor="black";let t=document.createElement("img");t.style.height="50px",t.style.width="50px",t.src="https://www.pngpix.com/wp-content/uploads/2016/11/PNGPIX-COM-Explosion-PNG-Image.png",e.appendChild(t)}else void 0!==t[0]?e.style.backgroundColor="black":e.style.backgroundColor="#003366"}a.appendChild(o),a.appendChild(n)}(t.givenBoard,e.givenBoard),Array.from(document.getElementsByClassName("cell")).forEach((t=>{t.addEventListener("click",(function(){!function(t,e,a,o){t.makeAttack(e,a),console.log(e),console.log(a),o.value=t.enemy.givenBoard[e][a],function(t){if("Hit"===t.value[1]){t.style.backgroundColor="black";let e=document.createElement("img");e.style.height="50px",e.style.width="50px",e.src="https://www.pngpix.com/wp-content/uploads/2016/11/PNGPIX-COM-Explosion-PNG-Image.png",t.appendChild(e)}else t.textContent="X",t.style.color="red",t.style.fontSize="45px",t.style.fontFamily="arial",t.style.textAlign="center"}(o)}(n,t.dataset.x,t.dataset.y,t)})),t.outerHTML=t.outerHTML}))}()})();