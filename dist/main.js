(()=>{"use strict";function t(t){if("Hit"===t.value[1]){let e=document.createElement("img");e.style.height="50px",e.style.width="50px",e.src="https://www.pngpix.com/wp-content/uploads/2016/11/PNGPIX-COM-Explosion-PNG-Image.png",t.appendChild(e)}else t.textContent="X",t.style.color="red",t.style.fontSize="45px",t.style.fontFamily="arial",t.style.textAlign="center"}function e(t){let e=function(t){let e=[];for(let n=0;n<t;n++)e.push("Not hit");return e}(t);return{length:t,type:n(t),status:e,hit(t){if(t>=this.length)throw Error;return this.status[t]="Hit",this.status[t]},isSunk(){let t=!0;return this.status.forEach((e=>{"Not hit"==e.valueOf()&&(t=!1)})),t},getLength(){return this.length}}}function n(t){switch(t){case 2:return"Destroyer";case 3:return"Cruiser";case 4:return"Battleship";case 5:return"Carrier"}}function o(){let t=new Array(10);for(let e=0;e<t.length;e++)t[e]=new Array(10),t[e].fill([]);let e=new Map,n=[];return{givenBoard:t,missed:n,place(n,o){let a=n.length,l=0,r=[];for(;a>0;){let t=[n.type,n.status[a-1],n.length-a];this.givenBoard[o][l]=t;let e=[o,l];r.push(e),a--,l++}return e.set(n,r),t=this.givenBoard,console.log(e),this.givenBoard},receiveAttack(t,o){let a=[t,o];return 0===this.givenBoard[t][o]?(n.push(a),n):(e.forEach((function(t,e){t.forEach((n=>{if(n.toString()===a.toString()){e.hit(t.indexOf(n));let o=[e.type,e.status[t.indexOf(n)]];a=o}}))})),this.givenBoard[t][o]=a,this.givenBoard)},allShipsSunk(){let t=!0;return e.forEach((function(e,n){0==n.isSunk()&&(t=!1)})),t}}}function a(t,n){let o,a=[],l=[];for(let t=2;t<6;t++)a.push(e(t));return o=0==n,{enemy:t,armada:a,attack:l,makeAttack(t,e){return this.enemy.receiveAttack(t,e),l.push([t,e]),e}}}!function(){let e=o(),n=o(),l=a(n,1),r=a(e,0),i=0;l.armada.forEach((t=>{e.place(t,i),n.place(t,i),i++})),function(t,e){let n=document.getElementById("content");n.style.display="grid",n.style.justifyContent="center";let o=document.createElement("DIV");o.setAttribute("id","player"),o.style.width="520px";let a=document.createElement("DIV");function l(t,e){for(let n=0;n<10;n++)for(let o=0;o<10;o++){let a=document.createElement("DIV");a.setAttribute("class","cell"),a.style.width="50px",a.style.height="50px",r(e[n][o],a,e),a.style.border="solid 1px grey",a.value=e[n][o],a.dataset.x=n,a.dataset.y=o,t.appendChild(a)}}function r(e,n,o){if(o===t)if("Hit"===e[1]){n.style.backgroundColor="black";let t=document.createElement("img");t.style.height="50px",t.style.width="50px",t.src="https://www.pngpix.com/wp-content/uploads/2016/11/PNGPIX-COM-Explosion-PNG-Image.png",n.appendChild(t)}else void 0!==e[0]?n.style.backgroundColor="black":n.style.backgroundColor="#003366";else if("Hit"===e[1]){n.style.backgroundColor="black";let t=document.createElement("img");t.style.height="50px",t.style.width="50px",t.src="https://www.pngpix.com/wp-content/uploads/2016/11/PNGPIX-COM-Explosion-PNG-Image.png",n.appendChild(t)}else n.style.backgroundColor="#003366"}a.setAttribute("id","computer"),a.style.width="520px",o.style.display="grid",o.style.gridTemplateColumns="auto auto auto auto auto auto auto auto auto auto ",o.style.marginTop="10px",a.style.display="grid",a.style.gridTemplateColumns="auto auto auto auto auto auto auto auto auto auto ",n.appendChild(a),n.appendChild(o),l(o,t),l(a,e)}(e.givenBoard,n.givenBoard),function e(n){if(console.log(n),0==n)Array.from(document.getElementById("computer").childNodes).forEach((o=>{o.addEventListener("click",(function(){console.log(o),0==function(e,n,o,a){return e.makeAttack(n,o),a.value=e.enemy.givenBoard[n][o],t(a),console.log(e.enemy.allShipsSunk()),e.enemy.allShipsSunk()}(l,o.dataset.x,o.dataset.y,o)?(Array.from(document.getElementsByClassName("cell")).forEach((t=>{t.outerHTML=t.outerHTML})),e(n)):alert("Congratulations! You won the game!")}))})),n++;else{let o=Math.floor(10*Math.random()+1),a=Math.floor(10*Math.random()+1);Array.from(document.getElementById("player").childNodes).forEach((e=>{e.dataset.x==o&&e.dataset.y==a&&(r.makeAttack(o,a),e.value=r.enemy.givenBoard[o][a],setTimeout((function(){t(e)}),1e3))})),e(--n)}}(0)}()})();