(()=>{"use strict";function t(t){let a=function(t){let e=[];for(let a=0;a<t;a++)e.push("Not hit");return e}(t);return{length:t,type:e(t),status:a,hit(t){if(t>=this.length)throw Error;return this.status[t]="Hit",this.status[t]},isSunk(){let t=!0;return this.status.forEach((e=>{"Not hit"==e.valueOf()&&(t=!1)})),t},getLength(){return this.length}}}function e(t){switch(t){case 2:return"Destroyer";case 3:return"Cruiser";case 4:return"Battleship";case 5:return"Carrier"}}function a(){let t=new Array(10);for(let e=0;e<t.length;e++)t[e]=new Array(10),t[e].fill([]);let e=new Map,a=[];return{givenBoard:t,missed:a,place(a,n){let o=a.length,l=0,r=[];for(;o>0;){let t=[a.type,a.status[o-1],a.length-o];this.givenBoard[n][l]=t;let e=[n,l];r.push(e),o--,l++}return e.set(a,r),t=this.givenBoard,console.log(e),this.givenBoard},receiveAttack(t,n){let o=[t,n];return 0===this.givenBoard[t][n]?(a.push(o),a):(e.forEach((function(t,e){t.forEach((a=>{if(a.toString()===o.toString()){e.hit(t.indexOf(a));let n=[e.type,e.status[t.indexOf(a)]];o=n}}))})),this.givenBoard[t][n]=o,this.givenBoard)},allShipsSunk(){let t=!0;return e.forEach((function(e,a){0==a.isSunk()&&(t=!1)})),t}}}function n(e,a){let n,o=[],l=[];for(let e=2;e<6;e++)o.push(t(e));return n=0==a,{enemy:e,armada:o,attack:l,makeAttack(t,a){let o,r;return 1==n?(o=Math.floor(10*Math.random()+1),r=Math.floor(10*Math.random()+1),0!==e.givenBoard[o][r]?this.makeAttack(0,0):this.attack.forEach((t=>{t===[o,r]&&this.makeAttack(0,0)}))):this.enemy.receiveAttack(t,a),l.push([o,r]),r}}}!function(){let t=a(),e=a(),o=n(e,1),l=(n(t,0),0),r=!1;function s(t,e,a,n){return t.makeAttack(e,a),n.value=t.enemy.givenBoard[e][a],function(t){if("Hit"===t.value[1]){t.style.backgroundColor="black";let e=document.createElement("img");e.style.height="50px",e.style.width="50px",e.src="https://www.pngpix.com/wp-content/uploads/2016/11/PNGPIX-COM-Explosion-PNG-Image.png",t.appendChild(e)}else t.textContent="X",t.style.color="red",t.style.fontSize="45px",t.style.fontFamily="arial",t.style.textAlign="center"}(n),console.log(t.enemy.allShipsSunk()),t.enemy.allShipsSunk()}for(o.armada.forEach((a=>{t.place(a,l),e.place(a,l),l++})),function(t,e){let a=document.getElementById("content");a.style.width="520px";let n=document.createElement("DIV"),o=document.createElement("DIV");n.style.display="none",n.style.gridTemplateColumns="auto auto auto auto auto auto auto auto auto auto ",o.style.marginTop="10px",o.style.display="grid",o.style.gridTemplateColumns="auto auto auto auto auto auto auto auto auto auto ",t.forEach((t=>{t.forEach((t=>{let e=document.createElement("DIV");e.setAttribute("class","cell"),e.style.width="50px",e.style.height="50px",l(t,e),e.style.border="solid 1px grey",n.appendChild(e)}))}));for(let t=0;t<10;t++)for(let a=0;a<10;a++){let n=document.createElement("DIV");n.setAttribute("class","cell"),n.style.width="50px",n.style.height="50px",l(e[t][a],n),n.style.border="solid 1px grey",n.value=e[t][a],n.dataset.x=t,n.dataset.y=a,o.appendChild(n)}function l(t,e){if("Hit"===t[1]){e.style.backgroundColor="black";let t=document.createElement("img");t.style.height="50px",t.style.width="50px",t.src="https://www.pngpix.com/wp-content/uploads/2016/11/PNGPIX-COM-Explosion-PNG-Image.png",e.appendChild(t)}else void 0!==t[0]?e.style.backgroundColor="black":e.style.backgroundColor="#003366"}a.appendChild(n),a.appendChild(o)}(t.givenBoard,e.givenBoard);0==r;)Array.from(document.getElementsByClassName("cell")).forEach((t=>{t.addEventListener("click",(function(){0==s(o,t.dataset.x,t.dataset.y,t)?Array.from(document.getElementsByClassName("cell")).forEach((t=>{t.outerHTML=t.outerHTML})):(console.log("the game is over"),r=!0)}))}))}()})();